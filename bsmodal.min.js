/* bsModal.js 1.00 Sep 2017 by TienCoffee */
"use strict";var bsModal=function(...a){let b,c,d=a[a.length-2],{title:e="",body:f="",footer:g="",size:h="md",js:i=()=>{}}=a[a.length-1];c=()=>{let j,k="bsModal"+Date.now()+~~(1e9*Math.random()),l=$(".modal").length;j=$(`<div class="modal fade ${k} $_modal" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close $_close" data-dismiss="modal">&times;</button><h4 class="modal-title">${e}</h4></div><div class="modal-body">${f}</div><div class="modal-footer">${g}</div></div></div></div>`),b=new Proxy(m=>$(`.${k} .\\$${m}`),{get:(m,n)=>"_modal"===n?j:m(n)}),document.activeElement.blur(),$(document.body).append(j),"number"==typeof h?j.append(`<style>@media(min-width:768px){.${k} .modal-dialog{width:${h}px}}</style>`):j.find(".modal-dialog").addClass("modal-"+h),j.css({paddingTop:15*l,zIndex:"+="+20*l}).on("hidden.bs.modal",()=>{j.remove()}).modal().next(".modal-backdrop").css({zIndex:"+="+20*l})},d?bsModal["bsModal"+d]=(...j)=>{c(),i(b,...j)}:(c(),i(b))};bsModal=new Proxy(bsModal,{get:(a,b)=>a["bsModal"+b]}),bsModal("alert",{title:"Thông báo",body:`<div class="$_message"></div>`,footer:`<button class="btn btn-primary $_close" data-dismiss="modal">OK</button>`,size:"sm",js(a,b="",c){a._message.html(b),c&&a._close.click(c),a._modal.on("shown.bs.modal",()=>{a._close.focus()})}}),bsModal("confirm",{title:"Xác nhận",body:`<div class="$_message"></div>`,footer:`<button class="btn btn-primary $_okbtn" data-dismiss="modal">OK</button><button class="btn btn-danger $_close" data-dismiss="modal">Hủy</button>`,size:"sm",js(a,b="",c){a._message.html(b),c&&(a._okbtn.click(()=>{c(!0)}),a._close.click(()=>{c(!1)})),a._modal.on("shown.bs.modal",()=>{a._okbtn.focus()})}}),bsModal("prompt",{title:"Nhập thông tin",body:`<p class="$_message"></p><input type="text" class="form-control $_input">`,footer:`<button class="btn btn-primary $_okbtn" data-dismiss="modal">OK</button><button class="btn btn-danger $_close" data-dismiss="modal">Hủy</button>`,size:"sm",js(a,b="",c="",d){a._message.html(b),a._input.val(c).keydown(e=>{13===e.keyCode&&a._okbtn.click()}),d&&(a._okbtn.click(()=>{d(a._input.val())}),a._close.click(()=>{d(null)})),a._modal.on("shown.bs.modal",()=>{a._input.focus()})}}),$(document.head).append(`<style>.modal-footer:empty{display:none}</style>`);
